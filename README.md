# Gif-Widget
Данный виджет даёт искать гифки Tenor, для дальнейшего их использования в чатах, форумах и т.п.
В зависимости от указанных сайтов в теле скрипта и его настройках, виджет может использоваться на любом сайте, форуме или чате (если у него есть веб версия).
***

[Скачать](https://raw.githubusercontent.com/TentacleTenticals/Gif-Widget/refs/heads/main/script.user.js)

На данный момент **не работает** в Discord. Чисто из за того, что виджет использует cdn для загрузки частей скрипта, а Discord блокирует их загрузку. Исправлю ли я? Не знаю.
***

## Виджет имеет возможности:
* Поиск гифок
* История гифок
  * Каждый раз при использовании найденной гифки, она добавляется в историю
  * В настройках можно установить лимит истории. При лимите, самая старая гифка заменяется более новой
  * Используется Firestore DB
* Коллекции гифок
  * Можно создавать коллекции гифок
  * Можно искать гифки внутри коллекций при помощи тегов
    * Для этого требуется указать теги при добавлении гифки в коллекцию
  * Используется Firestore DB
* Поддержка нескольких API для гифок (когда-нибудь)
  * Не факт что будуд добавлены другие API, но скрипт устроен так, чтобы это было возможным
***

## Secrets
Устройство **secretsList**:
```js
{
  "secretsList": {
    "google": {
      "oauth": {
        "refToken": "[Refresh Token]" /*Oauth токен*/
      },
      "firestore": {
        "db": "[Database Name]", /*Имя базы данных*/
        "projectID": "[Project ID]", /*ID проекта*/
        "clientID": "[Client ID]", /*ID клиента*/
        "clientSecret": "[Client Secret]", /*Secret клиента*/
        "redirectUri": "[Redirect URI]", /*Redirect URI*/
        "apiKey": "[Api key]", /*Firestore API ключ*/
        "proxyUrl": "[Proxy Url]" /*Proxy URI*/
      }
    },
    "tenor": {
      "appName": "[App Name]", /*Название приложения*/
      "accToken": "[Access Token]" /*Tenor Access токен*/
    }
  }
}
```

## Config
Устройство настроек:
```js
const config = {
  cfg: {
    main: {
      hotkey: 'F1', /* Горячая клавиша вызова виджета */
      width: '370px', /* Максимальная ширина виджета */
      scroll: {
        size: 'lite', /* Размер скроллбара */
        thumb: {
          color: 'rgb(120 200 120)' /* Цвет ползунка */
        }
      },
      return: {
        format: 'mp4' /* Стандартный формат выдачи ссылки при клике по итему */
      }
    },
    theme: 'dark', /* Цветовая тема (пока одна) */
    lang: 'en', /* Язык виджета (пока один) */
    address: ['home', 'def'], /* По идее должен устанавливать дефолтный адрес. НЕ ПРОВЕРЯЛОСЬ, не советую менять. Пока в разработке */
    preview: {
      height: '200px', /* Ширина превью гифок */
      type: 'gif tiny' /* Тип превью гифок. Советую использовать gif tiny, т.к. в хромиуме видео могут ломаться. В Firefox нормально */
    },
    itemsList: {
      height: '200px' /* Максимальная высота листа итемов */
    },
    search: {
      items: {
        limit: 10, /* Максимальное кол-во итемов при поиске гифок */
        inRow: 5 /* Максимум итемов в строке. Визуальное изменение */
      }
    },
    collection: {
      items: {
        inRow: 5 /* Максимум итемов в строке. Визуальное изменение */
      }
    },
    history: {
      items: {
        inRow: 5 /* Максимум итемов в строке. Визуальное изменение */
      }
    },
    api: {
      list: ['tenor'], /* Лист API. Не трогать */
      tenor: {
        item: {
          panel: {
            buttons: ['mp4', 'gif'] /* Кнопки при наведении на заголовок итемов */
          }
        }
      }
    }
  },
  sites: [ // Список поддерживаемых сайтов
    {
      name:'example', links: [['example\.com/\\d+', 'main']], func: {
      },
      main: 'example\.com'
    },
    {
      name:'dtf', links: [['dtf\.ru/\\d+', 'main']], func: {
      },
      main: 'dtf\.ru'

    }
  ]
};
```
